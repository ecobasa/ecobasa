{% load i18n menu_tags cosinnus_tags %}
<nav class="header navbar navbar-default" role="navigation">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">{% trans "Toggle navigation" %}</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    {% include "cosinnus/brand.html" %}
  </div>
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <div class="col-md-5">
      <ul class="nav navbar-nav">
        <li><a href="{% url 'pages-details-by-slug' slug='about' %}">{% trans "About the tour" %}</a></li>
        <li><a href="{% url 'community-list' %}">{% trans "Communities" %}</a></li>
        <li><a href="{% url 'pioneer-list' %}">{% trans "Pioneers" %}</a></li>
        <li><a href="{% url 'bus-list' %}">{% trans "Buses" %}</a></li>
        {% if group %}
          {% url 'community-dashboard' group=group.slug as dashboard_url %}
          <li {% ifequal dashboard_url request.path %} class="active"{% endifequal %}><a href="{{ dashboard_url }}">{% trans "Community Dashboard" %}</a></li>
        {% endif %}
        {% for app in apps %}
          <li{% if app.active %} class="active"{% endif %}><a href="{{ app.url }}">{{ app.label }}</a></li>
        {% endfor %}
      </ul>
    </div>
    <ul class="nav navbar-nav navbar-right">

      <li id="language-chooser">
        {% language_chooser %}
      </li>

      {% if request.user.is_authenticated %}
        {% if groups %}
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">{% if groups >= 1 %}{% trans "My Communities" %}{% else %}{% trans "My Community" %}{% endif %}{% if group %} <strong>({{ group }})</strong>{% endif %} <b class="caret"></b></a>
            <ul class="dropdown-menu">
              {% for g in groups %}
                <li{% if g == group %} class="active"{% endif %}><a href="{% url 'community-dashboard' group=g.slug %}">{{ g.name }}</a></li>
              {% endfor %}
              <li class="divider"></li>
              <li><a href="{% url 'community-list' %}">{% trans "List all communities" %}</a></li>
            </ul>
          </li>
        {% endif %}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ request.user|full_name }} <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="{% url 'cosinnus:profile-detail' %}"><span class="glyphicon glyphicon-user"></span> {% trans "Profile" %}</a></li>
            <!-- <li><a href="{% url 'cosinnus:user-dashboard' %}">{% trans "Dashboard" %}</a></li> -->
            <li><a href="{% url 'logout' %}"><span class="glyphicon glyphicon-log-out"></span> {% trans "Logout" %}</a></li>
          </ul>
        </li>
      {% else %}
        <li class="dropdown">
          <a href="{% url 'register' %}"><span class="glyphicon glyphicon-user"></span> {% trans "Register" context "the verb"  %}</a>
        </li>
        <li><a href="{% url 'login' %}"><span class="glyphicon glyphicon-log-in"></span> {% trans "Login" %}</a></li>
      {% endif %}
    </ul>
  </div>
</nav>
